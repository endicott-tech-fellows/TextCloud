<!DOCTYPE html>
<html>
<head>
	<title>WIP</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="main.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.4.0.min.js"></script>
</head>
<body>
	<div id="upload-section">
		<div id="upload-button">
			<label for="file-upload" class="custom-file-upload">
			    <i class="fa fa-file-text-o"></i> Upload Text
			</label>
			<input id="file-upload" class="button" type="file"/>
		</div>
	</div>

</body>

<script type="text/javascript">
	inputElement = document.getElementById("file-upload");
	inputElement.onchange = function(event) {
	   var file = inputElement.files[0];
	   readTextFile(file);
	}

	//https://stackoverflow.com/questions/14446447/how-to-read-a-local-text-file
	function readTextFile(file) {
	    var textType = /text.*/;

        if (file.type.match(textType)) {
           var reader = new FileReader();

           reader.onload = function(e) {
               var allText = reader.result;
               pullTopics(allText)
        	}

           reader.readAsText(file); 
		}
	}

	function pullTopics(allText) {
		var settings = {
		  "async": true,
		  "crossDomain": true,
		  "url": "https://api.meaningcloud.com/topics-2.0",
		  "method": "POST",
		  "headers": {
		    "content-type": "application/x-www-form-urlencoded"
		  },
		  "data": {
		    "key": "ea29c8adee07730287fd0a0b61e88bee",
		    "lang": "en",
		    "txt": allText,
		    "url": "",
		    "doc": "",
		    "tt": "a"
		  }
		}

		$.ajax(settings).done(function (response) {
		  console.log(response);
		});
	}
</script>

</html>
